#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <stdint.h>

#include "toeplitz.h"
#include "toeplitz2.h"

static uint8_t port_rss_key[] = {
 0x6d, 0x5a, 0x56, 0xda, 0x25, 0x5b, 0x0e, 0xc2,
 0x41, 0x67, 0x25, 0x3d, 0x43, 0xa3, 0x8f, 0xb0,
 0xd0, 0xca, 0x2b, 0xcb, 0xae, 0x7b, 0x30, 0xb4,
 0x77, 0xcb, 0x2d, 0xa3, 0x80, 0x30, 0xf2, 0x0c,
 0x6a, 0x42, 0xb7, 0x3b, 0xbe, 0xac, 0x01, 0xfa,

 0x6d, 0x5a, 0x56, 0xda, 0x25, 0x5b, 0x0e, 0xc2,
 0x41, 0x67, 0x25, 0x3d, 0x43, 0xa3, 0x8f, 0xb0,
 0xd0, 0xca, 0x2b, 0xcb, 0xae, 0x7b, 0x30, 0xb4,
 0x77, 0xcb, 0x2d, 0xa3, 0x80, 0x30, 0xf2, 0x0c,
 0x6a, 0x42, 0xb7, 0x3b, 0xbe, 0xac, 0x01, 0xfa,
};

int main()
{
	int i;
//	uint32_t res;
	uint8_t *rss_key;

	rss_key = port_rss_key;

	toeplitz_init(rss_key,sizeof(port_rss_key));

	for(i=0;i<10000000;i++) {
		uint32_t src = 1107924411+i;
		uint32_t dst = 2710463568;
		uint16_t sport = 2794;
		uint16_t dport = 1766;	

		printf("0x%8.8X\n",toeplitz_cpuhash_addrport(src,dst,sport,dport));
	}
}
/*	for(i=0;i<10;i++)
	{
		uint32_t ip4 = 2232238160+i;

		res = ((ip4 >> 0) & 0xff);
		res ^= ((ip4 >> 8) & 0xff);
		res ^= ((ip4 >> 16) & 0xff);
		res ^= ((ip4 >> 24) & 0xff);
		printf("%d\n",res);
		res = 0;
		res = ((ip4 >> 0) & 0xff);
		res += ((ip4 >> 8) & 0xff);
		res += ((ip4 >> 16) & 0xff);
		res += ((ip4 >> 24) & 0xff);
		//printf("ip4+=%d\n",res);
}*/

/*	printf("faddr >> 0 = %d\n", ((ip4 >> 0) & 0xff));
	printf("faddr >> 8 = %d\n", ((ip4 >> 8) & 0xff));
	printf("faddr >> 16 = %d\n", ((ip4 >> 16) & 0xff));
	printf("faddr >> 24 = %d\n", ((ip4 >> 24) & 0xff));*/
//}
